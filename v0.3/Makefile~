# CREATED  23 April 2014
# MODIFIED 19 July  2014

# AUTHOR Marco.Kienzle@gmail.com

# PURPOSE build the weekly delay difference model

CFLAGS = -std=c++0x -O2 -I/usr/include $(shell root-config --glibs --cflags) -lMinuit2

##############################################################################################################################################################
### 1. A program to fit the delay difference model to data and estimate parameters
##############################################################################################################################################################

FitDelayDifference_v0.3: vonMisesRecDist.o FitDelayDifference_v0.3.o LogLikelihoodFunction.o DelayDifference.o UsefulFunctions.o
			g++ -o DelayDifference_v0.3 /usr/lib/prob.o vonMisesRecDist.o FitDelayDifference_v0.3.o LogLikelihoodFunction.o DelayDifference.o UsefulFunctions.o $(CFLAGS)

UsefulFunctions.o: ../std_lib_facilities.h ../UsefulFunctions.h ../UsefulFunctions.cpp
			g++ $(CFLAGS) -c ../UsefulFunctions.cpp

vonMisesRecDist.o: ../vonMisesRecDist.cpp
	g++ $(CFLAGS) -c ../vonMisesRecDist.cpp

LogLikelihoodFunction.o: LogLikelihoodFunction.cpp LogLikelihoodFunction.h DelayDifference.h 
	g++ $(CFLAGS) -c LogLikelihoodFunction.cpp

DelayDifference.o: DelayDifference.cpp
	g++ $(CFLAGS) -c DelayDifference.cpp

FitDelayDifference_v0.3.o: FitDelayDifference_v0.3.cpp DelayDifference.h LogLikelihoodFunction.h
	g++ $(CFLAGS) -c FitDelayDifference_v0.3.cpp

# ##############################################################################################################################################################
# ### 2. A program to simulate a fishery with the delay difference model based on parameters estimated for this model 
# ##############################################################################################################################################################

# WeeklyDDprojections_v02: WeeklyDDprojections.cpp /usr/lib/prob.o Projections.cxx vonMisesRecDist.o WeeklyDDprojections.o UsefulFunctions.o
# 			g++ -std=c++0x -g -o WeeklyDDprojections_v0.2 -I/usr/include /usr/lib/prob.o Projections.cxx vonMisesRecDist.o WeeklyDDprojections.o UsefulFunctions.o

##############################################################################################################################################################
### make all
##############################################################################################################################################################

#all: FitDelayDifference_v0.3 WeeklyDDprojections_v02
all: FitDelayDifference_v0.3

##############################################################################################################################################################
### make clean
##############################################################################################################################################################

clean:
	rm -f *.o FitDelayDifference_v0.3 WeeklyDDprojections_v02

# ##############################################################################################################################################################
# ### make test
# ##############################################################################################################################################################

# test:
# 	./FitDelayDifference_v0.2 Data/SimData4.txt > /tmp/output
# 	tail --lines=+3 /tmp/output > /tmp/file1; tail --lines=+3 Results/v0.1.output > /tmp/file2
# 	diff /tmp/file1 /tmp/file2 # header differ by the version number
